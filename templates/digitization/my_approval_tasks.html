{% extends "base.html" %}
{% load static %}
{% block content %}
<div class="container mt-4">
  <h2>ğŸ“‹ æˆ‘çš„å®¡æ‰¹ä»»åŠ¡</h2>
  {% if steps %}
    <table class="table table-bordered mt-3">
      <thead class="table-light">
        <tr>
          <th>æµç¨‹åç§°</th>
          <th>èµ„æ–™åç§°</th>
          <th>å½“å‰æ­¥éª¤</th>
          <th>çŠ¶æ€</th>
          <th>æ“ä½œ</th>
        </tr>
      </thead>
      <tbody>
        {% for step in steps %}
        <tr>
          <td>{{ step.flow.template.name }}</td>
          <td>{{ step.flow.content_object.name }}</td>
          <td>{{ step.role_name }}</td>
          <td>
            {% if step.claimed_by and step.claimed_by != user %}
              <span class="text-danger">å·²è¢«ä»–äººæ‰¿æ¥</span>
            {% else %}
              å¾…å¤„ç†
            {% endif %}
          </td>
          <td>
            <a href="{% url 'handle_step' step.id %}" class="btn btn-sm btn-primary">è¿›å…¥å¤„ç†</a>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  {% else %}
    <div class="alert alert-info mt-3">æš‚æ— å¾…å¤„ç†çš„å®¡æ‰¹ä»»åŠ¡ã€‚</div>
  {% endif %}
</div>
{% endblock %}
